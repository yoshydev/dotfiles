# =============================================================================
# Zsh Configuration Entry Point
# =============================================================================

DOTFILES_DIR="${HOME}/dotfiles"
ZSH_DIR="${DOTFILES_DIR}/zsh"

# -----------------------------------------------------------------------------
# OS別設定（Linuxbrewなど、PATHに影響するため最初に読み込む）
# -----------------------------------------------------------------------------
local os_config="${ZSH_DIR}/os/$(uname | tr '[:upper:]' '[:lower:]').zsh"
[[ -f "$os_config" ]] && source "$os_config"

# -----------------------------------------------------------------------------
# 基本設定
# -----------------------------------------------------------------------------
source "${ZSH_DIR}/env.zsh"          # 環境変数
source "${ZSH_DIR}/path.zsh"         # PATH設定
source "${ZSH_DIR}/options.zsh"      # Zshオプション
source "${ZSH_DIR}/history.zsh"      # ヒストリ設定
source "${ZSH_DIR}/completion.zsh"   # 補完設定

# -----------------------------------------------------------------------------
# プラグイン（Zinit）
# -----------------------------------------------------------------------------
source "${ZSH_DIR}/plugins.zsh"

# -----------------------------------------------------------------------------
# ツール初期化
# -----------------------------------------------------------------------------
for tool in "${ZSH_DIR}"/tools/*.zsh; do
  [[ -f "$tool" ]] && source "$tool"
done

# -----------------------------------------------------------------------------
# エイリアス
# -----------------------------------------------------------------------------
source "${ZSH_DIR}/aliases.zsh"

# -----------------------------------------------------------------------------
# ローカル設定（git管理外）
# -----------------------------------------------------------------------------
[[ -f "${ZSH_DIR}/env.local.zsh" ]] && source "${ZSH_DIR}/env.local.zsh"
